<!-- This code is a modification of Xavier Arpa's page => https://_kingdox_.github.io/ -->
<!DOCTYPE html>
<html lang="en">
    <!-- HEAD -->
    <head>
        <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<meta name="description" content="Drawing outlines as a post-processing effect in Unity.">
<meta name="author" content="Xavier Arpa">

<!-- Tells Google not to provide a translation for this document -->
<meta name="google" content="notranslate">

<!-- Identify the software used to build the document -->
<meta name="generator" content="eleventy">

<!-- Open graph -->
<meta property="og:title" content="Edge Detection Outlines">
<meta property="og:description" content="Drawing outlines as a post-processing effect in Unity.">
<meta property="og:type" content="article">
<meta property="og:image" content="undefined/notes/edge-detection-outlines/cover.png"/>
<meta property="og:image:width" content="1200"/>
<meta property="og:image:height" content="675"/>

<!-- Twitter -->
<meta name="twitter:title" content="Edge Detection Outlines">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@_kingdox_">
<meta name="twitter:description" content="Drawing outlines as a post-processing effect in Unity.">
<meta name="twitter:image" content="https://kingdox.github.io/notes/edge-detection-outlines/cover.png">
<meta name="twitter:creator" content="@_kingdox_">

<title>Edge Detection Outlines</title>

<!-- CSS -->
<link rel="preload" href="/assets/css/reset.css" as="style" onload="this.onload=null;this.rel='stylesheet'">


<noscript><link rel="stylesheet" href="/assets/css/reset.css"></noscript>



<style>:root{--image-border-radius:2px;--base-color:#fdfdfd;--accent-color:#ffd8b5;--scrollbar-color:rgba(0, 0, 0, 0.15);--content-size:800px;--link-hover-color:rgb(0, 0, 0);--highlighter-roundness:10px;--marker-roundness:10px;--green:130,255,173;--orange:255,218,98;--blue:79,155,255;--red:255,98,124;--yellow:255,234,71;--gray:rgba(60, 60, 60, 0.7)}body,html{background-color:var(--base-color);margin:0;padding:0;scroll-behavior:smooth;border:none}::selection{background-color:#e0e0e0}.fade-in{animation:fade-in 1s cubic-bezier(.165,.84,.44,1) both}@keyframes fade-in{0%{opacity:0}100%{opacity:1}}.note-content h1{text-align:center;margin-top:20px;margin-bottom:15px}.column-page-content h2{margin-top:40px;margin-bottom:15px}.note-content h3{margin-top:40px;margin-bottom:15px}.note-content h4{margin-top:40px;margin-bottom:5px;font-size:15px}p{-webkit-hyphens:auto;-ms-hyphens:auto;-moz-hyphens:auto;hyphens:auto}.column-page-content p{margin-bottom:10px;padding:0;font-family:Inconsolata,monospace;text-align:justify;font-style:normal;font-size:16px;letter-spacing:.02em;line-height:1.6em;overflow-wrap:break-word}.column-page-content p a{text-decoration:none;border-bottom:2px dotted #000;opacity:1;color:#000}.column-page-content p a:hover{background-color:var(--link-hover-color);color:#fff;transition:color .2s ease;font-weight:700;opacity:1}.note-content{background-color:var(--base-color)}.column-page-content{grid-area:content;position:relative}.note-title{line-height:1.3em}.note-subtitle{text-align:center;font-size:medium}.note-subtitle p{text-align:center}.reading-time{font-family:Inconsolata,monospace;font-weight:400}.katex-display .katex{padding-top:10px;padding-bottom:10px;border:2px dashed #cacaca;border-radius:5px}.katex-display>.katex{white-space:nowrap;text-align:initial}.katex{line-height:1.2;white-space:normal;text-indent:0}blockquote{box-sizing:border-box;font-style:italic;color:#494949;background-color:rgba(230,230,230,.5);border-color:#000;border-radius:4px;border-width:2px;border-style:solid;margin-top:15px;margin-bottom:15px;padding:8px 16px}.column-page-content blockquote p{margin:0;text-align:left}.column-page-content blockquote:hover{outline-offset:0;animation:pulse 1s ease-out infinite forwards;z-index:1000}@keyframes pulse{0%{outline-offset:0;outline:solid 4px rgba(160,160,160,.5)}100%{outline-offset:8px;outline:solid 2px rgb(255,255,255,0)}}.note-date{margin-top:50px;padding-bottom:0;margin-bottom:0;font-size:smaller;font-family:arial-rounded-bold}.note-footer{grid-area:footer;background-color:var(--base-color);border-top:2px dashed var(--gray);margin-top:20px;padding-top:.8rem;display:flex;align-items:center;justify-content:space-between}.note-tags{padding:0}.note-tags a{display:block;padding-inline-start:10px;padding-inline-end:10px;font-size:14px;line-height:30px;text-decoration:none;background-color:var(--tag-bg);border:2px solid var(--tag-text);color:var(--tag-text);border-radius:10px;transition:transform .1s;font-family:arial-rounded-bold;box-shadow:1px 1px}.note-tags a:before{content:"#";margin-right:.25rem}.note-tags a:hover{transform:scale(1.05)}.note-tags sup{font-size:xx-small;vertical-align:super}.note-tags li{display:inline-block;padding-right:10px;padding-bottom:5px;padding-top:5px}.tag{display:inline-block;padding:.25rem .75rem;margin:1rem .5rem 0 0;font-size:1rem;font-family:Inter,sans-serif;line-height:130%;border-radius:.5rem;text-decoration:none;position:relative;top:0;transition:.35s}.menu ul{list-style-type:none;margin-right:20px;margin-left:20px;padding:0}ul{padding-inline-start:20px;padding-bottom:10px;margin-block-start:0px;margin-block-end:0px}.menu ul li{text-align:right;font-family:Inter,serif;font-size:1.2em;padding-top:10px;padding-bottom:10px}.menu{text-align:right;display:none;position:absolute;background-color:var(--base-color);box-shadow:-10px 0 30px -15px #0000002b;right:0;position:fixed;z-index:499;top:65px;bottom:0}.menu a{text-decoration:none;color:#000}#toggle{display:none}#toggle:checked+#menu{display:flex}.sticky{position:-webkit-sticky;position:sticky;z-index:2}#navbar-desktop{background-color:var(--base-color);display:flex;flex-wrap:wrap;align-items:center;justify-content:space-around;z-index:500;position:fixed;top:0;left:0;width:100%}#navbar-desktop[stuck]{opacity:0;transition:opacity 1s,transform 1.3s}#navbar-mobile{background-color:var(--base-color);display:flex;flex-wrap:wrap;align-items:center;justify-content:space-around;z-index:500;position:fixed;top:0;left:0;width:100%}.navigation{flex:1}.navigation ul{justify-content:space-between;display:flex;list-style-type:none;margin:0;padding:0}.navigation ul a{text-decoration:none;display:flex;color:#000}.small-font{font-size:small}.large-font{font-size:large}.column-page{margin-top:52px;padding-bottom:50px;display:grid;grid-template-areas:"left content right""left footer right";background:linear-gradient(to left,var(--base-color),var(--base-color));background-blend-mode:multiply,normal,normal,normal}.wide-column-page{background-color:var(--base-color);padding-bottom:50px;display:grid;grid-template-areas:"left content right""left footer right"}.wide-column-page-content{background-color:var(--base-color);grid-area:content;text-align:justify;position:relative}.notes-list{text-align:right;grid-area:left;list-style-position:inside;list-style:none;margin:0;padding:0}.notes-list-link{text-align:right}.notes-list-link a{text-decoration:none;color:inherit}.notes-list-link a:hover{font-weight:700;font-style:normal}h3 span{font-weight:400}.note-content .download-button{display:inline-block;padding:.25rem .5rem;border-radius:0;border:2px dashed #000;font-size:smaller}.download-button{display:inline-block;padding:.25rem .5rem;border-radius:0;border:2px dashed #000;font-size:smaller;text-decoration:none;color:inherit}.download-button:hover{background-color:var(--link-hover-color);color:#fff;transition:color .2s ease;font-weight:700;opacity:1}.menu li .resume-button{text-decoration:none;color:#fff;background-color:#000;border-radius:5px;line-height:1em;padding:8px 0 8px 10px;align-items:center;font-size:small;z-index:400}.portfolio-button{text-decoration:none;color:#fff;background-color:#000;border-radius:5px;line-height:1em;margin-right:10px;padding:4px 0 4px 10px;align-items:center;font-size:small;display:flex}.portfolio-icon{margin-left:3px;margin-right:4px}[class*=" icon-"].portfolio-icon::before,[class^=icon-].portfolio-icon::before{font-size:16px}[class*=" icon-"].tags-icon::before,[class^=icon-].tags-icon::before{font-size:16px}.navbar-icon{color:#000;margin-left:5px;margin-right:5px}.anchor-link{text-decoration:none}.anchor-symbol{color:#cecece}.anchor-symbol:hover{color:#000;transition:color .2s ease;font-weight:700;opacity:1}.screen-reader-only{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}figcaption{font-family:Inconsolata,monospace;font-style:normal;font-weight:700;font-size:13px;letter-spacing:.02em;line-height:1.6em;color:rgba(53,53,53,.8)}.images-row{display:flex;margin:20px -5px}.images-row picture{margin:0 5px}.images-row figure picture{margin:0}.images-row figure{margin:0 5px 20px 5px}.images-row img{display:inline-block;max-width:100%;width:auto;height:100%;border-radius:var(--image-border-radius)}li{margin:0;padding:0;font-family:Inconsolata,monospace;text-align:justify;font-style:normal;font-size:16px;letter-spacing:.02em;line-height:1.6em}p img{max-width:100%;border-radius:var(--image-border-radius);display:block;margin-left:auto;margin-right:auto;border-style:none;margin:1.25em 0}p img[width][height]{height:100%}figure img[width][height]{height:100%}.note-video{display:block;margin-left:auto;margin-right:auto;margin-top:30px;margin-bottom:30px}.blob-num{border-right:1px solid #ddd}.gist-meta a{color:#3b5998!important;font-weight:700;text-decoration:none}.gist-meta a:hover{text-decoration:underline!important}.hover-highlight::before{content:"";position:absolute;width:100%;height:100%;top:0;left:0;z-index:-1;border-radius:var(--marker-roundness);background-image:linear-gradient(104deg,rgba(0,0,0,0) .9%,rgba(var(--highlighter-color),1.25) 2.4%,rgba(var(--highlighter-color),.5) 5.8%,rgba(var(--highlighter-color),.25) 93%,rgba(var(--highlighter-color),.7) 96%,rgba(0,0,0,0) 98%),linear-gradient(183deg,rgba(0,0,0,0) 0,rgba(var(--highlighter-color),.3) 7.9%,rgba(0,0,0,0) 15%);transform:rotate(-5deg);-webkit-box-decoration-break:clone;box-decoration-break:clone;background-size:0 100%;background-repeat:no-repeat;transition:.3s}.hover-highlight{position:relative;overflow:hidden;padding:.1em 15px}.hover-highlight:hover:before{background-size:100% 100%}.navbar-element-active.hover-highlight:before{background-size:100% 100%}mark{background-color:mark;color:marktext;padding:.1em 5px;margin-right:-5px;margin-left:-5px;border-radius:var(--marker-roundness);-webkit-box-decoration-break:clone;box-decoration-break:clone;background:linear-gradient(104deg,rgba(0,0,0,0) .9%,rgba(var(--marker-color),1.25) 2.4%,rgba(var(--marker-color),.5) 5.8%,rgba(var(--marker-color),.25) 93%,rgba(var(--marker-color),.7) 96%,rgba(0,0,0,0) 98%),linear-gradient(183deg,rgba(0,0,0,0) 0,rgba(var(--marker-color),.3) 7.9%,rgba(0,0,0,0) 15%)}figure{display:block;margin-left:auto;margin-right:auto;margin-top:30px;margin-bottom:30px}picture{display:flex;justify-content:center;margin:0}figcaption{display:flex;justify-content:center}#profile-picture{width:50px;height:50px;border-radius:9999px}.navbar-nav{padding:5px}.navbar-nav>.active{color:#282828;font-weight:700}.navbar-element{font-size:large;color:#1b1b1b;text-decoration:none;font-family:arial-rounded-bold;margin-left:1rem;margin-right:1rem}.navbar-element:hover{color:var(--navbar-element-color)}.navbar-element-active{color:var(--navbar-element-color)}summary{list-style:none;border:2px solid #000;padding:.75em 1em;border-radius:0;cursor:pointer;position:relative;padding-left:calc(1.75rem + .75rem + .75rem)}summary:before{position:absolute;top:50%;transform:translateY(-50%);left:.75rem;content:"↓";width:1.75rem;height:1.75rem;background-color:#000;color:#fff;display:inline-flex;justify-content:center;align-items:center;flex-shrink:0}details[open] summary{background-color:#e7e7e7}details[open] summary:before{content:"↑"}details div{border-left:2px solid #000;border-right:2px solid #000;border-bottom:2px solid #000;padding:1em}details{margin-top:10px;margin-bottom:10px}summary:hover{background-color:#e7e7e7}@font-face{font-family:icons;src:url('/assets/fonts/icons.woff2?7673508') format('woff2'),url('/assets/fonts/icons.woff?7673508') format('woff'),url('/assets/fonts/icons.svg?7673508#icons') format('svg');font-weight:400;font-style:normal;font-display:swap}.footer-icon{color:#bebebe}.footer-icon:hover{color:#3c3c3c}[class*=" icon-"]:before,[class^=icon-]:before{font-family:icons;font-style:normal;font-weight:400;display:inline-block;text-decoration:inherit;font-size:24px;width:1em;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-tag:before{content:"\e935"}.icon-eye:before{content:"\e9ce"}.icon-arrow-up:before{content:"\ea3a"}.icon-twitter:before{content:"\ea96"}.icon-github:before{content:"\eab0"}.icon-linkedin:before{content:"\eac9"}@media only screen and (max-device-width:1920px){#navbar-mobile{display:none}#back-to-top-mobile{display:none}p img[width]{width:50%}figure img[width]{width:50%}}@media only screen and (max-device-width:576px){#navbar-mobile{display:flex}#navbar-desktop{display:none}#back-to-top-mobile{display:block}#back-to-top-desktop{display:none}p img[width]{width:100%}figure img[width]{width:100%}video[width]{width:100%}}@media (min-width:350px){.column-page,.note{grid-template-columns:auto 340px auto}.wide-column-page{grid-template-columns:auto 340px auto}}@media (min-width:450px){.column-page,.note{grid-template-columns:auto 400px auto}.wide-column-page{grid-template-columns:auto 400px auto}}@media (min-width:576px){.column-page,.note{grid-template-columns:auto 500px auto}.wide-column-page{grid-template-columns:auto 500px auto}}@media (min-width:768px){.column-page,.note{grid-template-columns:auto 500px auto}.wide-column-page{grid-template-columns:auto 750px auto}}@media (min-width:992px){.column-page,.note{grid-template-columns:auto 700px auto}.wide-column-page{grid-template-columns:auto 900px auto}}@media (min-width:1200px){.column-page,.note{grid-template-columns:auto 700px auto}.wide-column-page{grid-template-columns:auto 1150px auto}}@media (min-width:1400px){.column-page,.note{grid-template-columns:auto 700px auto}.wide-column-page{grid-template-columns:auto 1350px auto}}.timeline{margin-top:40px;margin-bottom:40px}.timeline-list{position:relative;padding-left:45px;list-style:none}.timeline-event p{position:relative;top:-5px;margin:0;text-align:left}.timeline-event .year{font-size:small;padding:0;margin:0;font-weight:700;color:#6e6e6e}.timeline-event{position:relative}.timeline-event.is-not-done{padding-bottom:30px}.timeline-event.is-done{padding-bottom:15px}.timeline-event:before{display:inline-block;content:'';position:absolute;left:-37px;height:100%;width:10px}.timeline-event::after{content:'';display:inline-block;position:absolute;top:0;left:-44px;width:12px;height:12px;border:2px solid #000;border-radius:50%;background-color:#fff}.timeline-event.is-not-done::before{border-left:3px dotted #000}.timeline-event.is-done:not(:last-child)::before{border-left:3px solid #000}.timeline-event.is-done::after{font-size:10px;border:2px solid #000;background-color:#000}.left-section{margin-top:122px;float:left;width:50%;min-height:100%;display:flex;flex-direction:column;background-color:var(--base-color);position:fixed}.left-section-content{display:flex;flex-direction:column;align-items:center;justify-content:center}body,html{height:100%;margin:0}.right-section{margin-top:82px;float:right;width:50%;min-height:100%;background-color:var(--base-color)}.right-section .column-page-content{padding-left:15%;padding-right:15%}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}.px-50{padding-left:.5rem;padding-right:.5rem}.px-75{padding-left:.75rem;padding-right:.75rem}.px-150{padding-left:1.5rem;padding-right:1.5rem}.py-50{padding-top:.5rem;padding-bottom:.5rem}.py-75{padding-top:.75rem;padding-bottom:.75rem}.py-100{padding-top:1rem;padding-bottom:1rem}.rounded-25{border-radius:.25rem}.c-gray{color:#282828}.bg-gray-hover:hover{background:#f4f4f4}.no-underline{text-decoration:none}.align-right{text-align:right;list-style-position:inside}.note-entry-header h3{padding-top:0}.note-entry-header span{padding-right:5px}.note-entry-content h3{padding-bottom:0}.project-entry-content h3{padding-bottom:0}.note-content iframe{padding:0;margin:0;width:100%;display:block}@font-face{font-family:arial-rounded-regular;src:url('/assets/fonts/arial-rounded.woff2') format('woff2'),url('/assets/fonts/arial-rounded.woff') format('woff');font-weight:400;font-style:normal}@font-face{font-family:arial-rounded-bold;src:url('/assets/fonts/arial-rounded-bold.woff2') format('woff2'),url('/assets/fonts/arial-rounded-bold.woff') format('woff');font-weight:400;font-style:normal}.projects{margin:0 auto;display:grid;grid-gap:1rem;grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}.project-entry{position:relative;background:#fff;border-radius:10px;transition:transform .2s;border:1px solid #f0f0f0}.project-entry-image{border-radius:10px 10px 0 0;height:100px;object-fit:cover;width:100%}.project-entry:active{transform:scale(.95)}.project-entry-content{padding:15px}.project-entry-description{margin:8px 0;color:var(--gray);font-size:14px;line-height:1.6;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.project-entry-footer{color:var(--gray);font-size:12px}.project-entry-link{position:absolute;left:0;right:0;top:0;bottom:0}.project-image{border-radius:10px}.action-buttons{display:flex;justify-content:space-evenly}.action-button-link{position:absolute;left:0;right:0;top:0;bottom:0}.action-button:hover{transform:scale(1.02)}.column-page-content .action-button p{text-align:center;margin:0}.action-button{max-width:fit-content;width:100%;display:block;font-size:14px;line-height:30px;color:#fff;text-decoration:none;background:#000;border-radius:10px;transition:transform .1s;position:relative;padding:12px;margin-bottom:20px}.devlog-entry{max-width:740px;margin:6rem auto;padding:2rem;padding-left:280px;clear:both;display:flex;flex-direction:column;position:relative;text-decoration:none}.devlog-entry-link{position:absolute;top:0;bottom:0;left:0;right:inherit}.devlog-entry-title h2{padding-top:0;padding-bottom:5px;font-weight:bolder}.devlog-entry-body{display:flex;flex-direction:column;padding:2rem}.devlog-entry-body .devlog-entry-description{margin-bottom:10px;padding:0;font-family:Inconsolata,monospace;text-align:justify;font-style:normal;font-size:16px;letter-spacing:.02em;line-height:1.6em}.devlog-entry-image{box-shadow:0 0 0 rgb(50 115 235 / 0%);border-radius:8px;position:absolute;left:0;top:0;bottom:0;width:280px;overflow:hidden;transition:all .2s ease}.devlog-entry-image img{width:100%;height:100%;max-width:100%;max-height:100%;object-fit:cover;object-position:center}.devlog-entry:active{transform:scale(.95)}.note-entry{border-radius:8px;border:2px solid #000;box-shadow:2px 2px;overflow:hidden;margin-bottom:20px;position:relative}.note-entry-grid{display:grid;grid-template-columns:70% 30%;grid-gap:0px;background:#fffF}.note-entry-header h3{margin:0;font-size:16px}.note-entry-description{margin:12px 0;color:#000;line-height:1.6;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.note-entry-description p{margin:0;font-family:Inconsolata,monospace;text-align:left;font-style:normal;font-size:16px;line-height:1.4em}.note-entry-footer{color:#000;font-size:smaller;font-family:arial-rounded-bold}.note-entry-main{padding:14px}.note-entry-image{padding:0;position:relative;grid-column:2;max-height:100%;max-width:100%}.note-entry-image img{width:100%;height:140px;display:block;object-fit:cover}.note-entry-link{position:absolute;left:0;right:0;top:0;bottom:0}.bold{font-weight:700}.tags-header{display:flex;align-items:center;padding-top:0;padding-bottom:0;margin-bottom:20px;margin-top:40px}.tags-header h2{padding:0;margin:0;text-align:left}.home-header{align-items:center;justify-content:space-between;padding-top:0;padding-bottom:0}.home-header h2{padding:0;margin:0;text-align:left}.home-header img{width:6rem;height:6rem;border-radius:100%;flex-grow:0;flex-shrink:0;margin-right:0}.back-to-top-mobile{position:absolute;top:116vh;right:0;bottom:0}.back-to-top-mobile a{padding:.5rem;position:-webkit-sticky;position:sticky;top:91vh;text-decoration:none;display:inline-block;text-align:center;transition:top .4s ease 0s;color:#000;background-color:#fff;border-radius:.25rem;box-shadow:0 8px 15px rgba(0,0,0,.1)}.back-to-top-desktop{position:absolute;top:120vh;bottom:0;right:-100px}.back-to-top-desktop a{padding:.5rem;position:-webkit-sticky;position:sticky;top:90vh;text-decoration:none;display:flex;align-items:center;justify-content:center;transition:top .4s ease 0s;color:#3c3c3c;background-color:#fff;box-shadow:0 4px 10px rgba(0,0,0,.1);border-radius:50%;width:2rem;height:2rem;line-height:2rem}.icon-arrow-up:before{margin-top:8px}.back-to-top-desktop a:hover{top:85vh;color:#aaa}::-webkit-scrollbar{width:22px}::-webkit-scrollbar-track{background:0 0}::-webkit-scrollbar-thumb{background:var(--scrollbar-color);border:5px solid var(--base-color);border-radius:8px}::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,.25)}code[class*=language-],pre[class*=language-]{color:#d6deeb;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:.9em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:rgba(29,59,83,.99)}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:rgba(29,59,83,.99)}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:1.25em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{color:#fff;background:#011627;border-radius:4px}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.prolog{color:#637777;font-style:italic}.token.punctuation{color:#c792ea}.namespace{color:#b2ccd6}.token.deleted{color:rgba(239,83,80,.56);font-style:italic}.token.property,.token.symbol{color:#80cbc4}.token.keyword,.token.operator,.token.tag{color:#7fdbca}.token.boolean{color:#ff5874}.token.number{color:#f78c6c}.token.builtin,.token.char,.token.constant,.token.function{color:#82aaff}.token.doctype,.token.selector{color:#c792ea;font-style:italic}.token.attr-name,.token.inserted{color:#addb67;font-style:italic}.language-css .token.string,.style .token.string,.token.entity,.token.string,.token.url{color:#addb67}.token.atrule,.token.attr-value,.token.class-name{color:#ffcb8b}.token.important,.token.regex,.token.variable{color:#d6deeb}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}pre::-webkit-scrollbar-thumb{background:#6e6e6e;border:5px solid;border-radius:8px;border-color:#011627}pre::-webkit-scrollbar-thumb:hover{background:#969696}</style>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">

    <!-- The loading of KaTeX is deferred to speed up page rendering -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js" integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>

    <!-- To automatically render math in text elements, include the auto-render extension: -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>

<!-- ICONS -->
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22><text y=%2224%22 font-size=%2224%22>🖍️</text></svg>">
<link rel="preload" as="font" href="/assets/fonts/icons.woff2?7673508" type="font/woff2" crossorigin="crossorigin"/>

<!-- INLINED GOOGLE FONTS -->
<link rel="preconnect" as="font" href="https://fonts.gstatic.com">
<style>
  body,
  h1,
  h2,
  h3,
  h5 {
    font-family: 'Inter', serif;
  }
</style>
<style>
  /* latin */
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 700;
    font-display: swap;
    src: url("https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7.woff2") format('woff2');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
  }
</style>
<!-- <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">-->

<!-- GOOGLE ANALYTICS -->

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-137365487-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-137365487-1');
  </script>


<!--<script src='/assets/js/script.js' defer></script>-->


    </head>

    <!-- BODY -->
    <body class="fade-in">
            
<style>
    :root {
        --marker-color: var(--yellow);
    }
</style>

<header id="navbar-desktop" class="sticky py-100">
  <nav class="navbar-nav">
    <!--<a href="/" aria-label="Home page." class="hover-highlight  navbar-element" style="--highlighter-color: 235, 204, 255; --navbar-element-color: #803fab">/ home</a>-->
    <a href="/notes" aria-label="All notes." class="hover-highlight  navbar-element" style="--highlighter-color: 185,231,236; --navbar-element-color: #0b85ff">/ notes</a>
    <a href="/about" aria-label="About me." class="hover-highlight  navbar-element" style="--highlighter-color: 255, 234, 71; --navbar-element-color: #f4ad43">/ about</a>
  </nav>
</header>

<!-- https://cutcodedown.com/tutorial/mobileMenu-->
<!--https://medium.com/@heyoka/responsive-pure-css-off-canvas-hamburger-menu-aebc8d11d793-->
<header id="navbar-mobile" class="sticky py-100">
   <nav class="navbar-nav">
    <!--<a href="/" aria-label="Home page." class="hover-highlight  navbar-element" style="--highlighter-color: 235, 204, 255; --navbar-element-color: #803fab">/ home</a>-->
    <a href="/notes" aria-label="All notes." class="hover-highlight  navbar-element" style="--highlighter-color: 185,231,236; --navbar-element-color: #0b85ff">/ notes</a>
    <a href="/about" aria-label="About me." class="hover-highlight  navbar-element" style="--highlighter-color: 255, 234, 71; --navbar-element-color: #f4ad43">/ about</a>
  </nav>

  

</header>



<div class="note column-page">
    <div class="note-content column-page-content">
        <h1 class="note-title">🖍️
            Edge Detection Outlines</h1>
        <div class="note-subtitle"><p class="reading-time"><b>4</b> minute read</p></div>
        <p><picture><source type="image/webp" srcset="outline.png-400w.webp 400w, outline.png-800w.webp 800w, outline.png-1200w.webp 1200w, outline.png-2102w.webp 2102w" sizes="(min-width: 30em) 50vw, 100vw"><source type="image/jpeg" srcset="outline.png-400w.jpeg 400w, outline.png-800w.jpeg 800w, outline.png-1200w.jpeg 1200w, outline.png-2102w.jpeg 2102w" sizes="(min-width: 30em) 50vw, 100vw"><img class="note-image" alt="Outline effect." style="width:;" loading="lazy" decoding="async" src="outline.png-400w.jpeg" width="2102" height="1268"></picture></p>
<h2 id="introduction" tabindex="-1"><a class="anchor-link" href="#introduction" target="_blank" rel="noopener noreferrer">
                  <span class="screen-reader-only">Jump to heading</span>
                  <span aria-hidden="true" class="anchor-symbol">#</span>
                </a> Introduction</h2>
<p>Imagine we give our shader the image below on the left and we want the shader to generate an outline for us. We could simply detect if there is a sudden color discontinuity, and if that is the case, draw an outline. However, it is possible that not all sides have a different color like in the second image. In that case we will need to take a look at the orientation of the face (the normal vector). In the last image, the background has the same color as some of the sides of the structure, in this case we will need to take a look at a depth difference in the scene.</p>
<p><picture><source type="image/webp" srcset="discontinuities_color.png-400w.webp 400w, discontinuities_color.png-800w.webp 800w, discontinuities_color.png-1200w.webp 1200w, discontinuities_color.png-1268w.webp 1268w" sizes="(min-width: 30em) 50vw, 100vw"><source type="image/jpeg" srcset="discontinuities_color.png-400w.jpeg 400w, discontinuities_color.png-800w.jpeg 800w, discontinuities_color.png-1200w.jpeg 1200w, discontinuities_color.png-1268w.jpeg 1268w" sizes="(min-width: 30em) 50vw, 100vw"><img class="note-image" alt="Outline effect." style="width:;" loading="lazy" decoding="async" src="discontinuities_color.png-400w.jpeg" width="1268" height="1268"></picture>
<picture><source type="image/webp" srcset="discontinuities_normals.png-400w.webp 400w, discontinuities_normals.png-800w.webp 800w, discontinuities_normals.png-1200w.webp 1200w, discontinuities_normals.png-1268w.webp 1268w" sizes="(min-width: 30em) 50vw, 100vw"><source type="image/jpeg" srcset="discontinuities_normals.png-400w.jpeg 400w, discontinuities_normals.png-800w.jpeg 800w, discontinuities_normals.png-1200w.jpeg 1200w, discontinuities_normals.png-1268w.jpeg 1268w" sizes="(min-width: 30em) 50vw, 100vw"><img class="note-image" alt="Outline effect." style="width:;" loading="lazy" decoding="async" src="discontinuities_normals.png-400w.jpeg" width="1268" height="1268"></picture>
<picture><source type="image/webp" srcset="discontinuities_depth.png-400w.webp 400w, discontinuities_depth.png-800w.webp 800w, discontinuities_depth.png-1200w.webp 1200w, discontinuities_depth.png-1268w.webp 1268w" sizes="(min-width: 30em) 50vw, 100vw"><source type="image/jpeg" srcset="discontinuities_depth.png-400w.jpeg 400w, discontinuities_depth.png-800w.jpeg 800w, discontinuities_depth.png-1200w.jpeg 1200w, discontinuities_depth.png-1268w.jpeg 1268w" sizes="(min-width: 30em) 50vw, 100vw"><img class="note-image" alt="Outline effect." style="width:;" loading="lazy" decoding="async" src="discontinuities_depth.png-400w.jpeg" width="1268" height="1268"></picture></p>
<p>The solution to creating an effective outline shader that will work for all geometry and colors, is to take into account color, normal vector and/or depth discontinuities. But how do we detect these discontinuities?</p>
<h2 id="depthnormals-texture" tabindex="-1"><a class="anchor-link" href="#depthnormals-texture" target="_blank" rel="noopener noreferrer">
                  <span class="screen-reader-only">Jump to heading</span>
                  <span aria-hidden="true" class="anchor-symbol">#</span>
                </a> DepthNormals Texture</h2>
<p>The Universal Render Pipeline generates a texture called the _CameraColorTexture. This texture gives us a look at all the colors in the scene without any post-processing. We can use it to detect color disconinuities in the scene. A second texture that can be generated by URP, is the _CameraDepthTexture. This texture gives us a color gradient representing the depth of objects in the scene. It uses the red channel so that's why the texture is tinted red.</p>
<p><picture><source type="image/webp" srcset="CameraColorTexture.png-300w.webp 300w" sizes="(min-width: 30em) 50vw, 100vw"><img class="note-image" alt="Outline effect." style="width:;" loading="lazy" decoding="async" src="CameraColorTexture.png-300w.jpeg" width="300" height="299"></picture>
<picture><source type="image/webp" srcset="CameraDepthTexture.png-300w.webp 300w" sizes="(min-width: 30em) 50vw, 100vw"><img class="note-image" alt="Outline effect." style="width:;" loading="lazy" decoding="async" src="CameraDepthTexture.png-300w.jpeg" width="300" height="299"></picture>
<picture><source type="image/webp" srcset="CameraDepthNormalsTexture.png-300w.webp 300w" sizes="(min-width: 30em) 50vw, 100vw"><img class="note-image" alt="Outline effect." style="width:;" loading="lazy" decoding="async" src="CameraDepthNormalsTexture.png-300w.jpeg" width="300" height="299"></picture></p>
<p>A third commonly used texture is the _CameraDepthNormalsTexture which is a texture that combines the depth and normals information of the scene into 1 texture. Sadly, URP does not generate a depth + normals texture. However, it is possible for us to modify the pipeline to generate this texture for us so that we can sample it and use this information in our outline shader. To do this, we will be modifying the pipeline by adding a Scriptable Renderer Feature.</p>
<h2 id="scriptable-renderer-feature" tabindex="-1"><a class="anchor-link" href="#scriptable-renderer-feature" target="_blank" rel="noopener noreferrer">
                  <span class="screen-reader-only">Jump to heading</span>
                  <span aria-hidden="true" class="anchor-symbol">#</span>
                </a> Scriptable Renderer Feature</h2>
<p>To generate the _CameraDepthNormalsTexture we will be creating our own custom scriptable renderer feature. A scriptable renderer feature can be used to inject render passes into the renderer. We will be creating a script called DepthNormalsFeature.cs. This script will include the ScriptableRendererFeature as well as the ScriptableRendererPass.</p>
<p>The code is as follows.</p>
<script src="https://gist.github.com/_kingdox_/55ad39fdbffca9f98fe86aa568af0833.js"></script>
<p>Now in our renderer asset we can add the DepthNormalsFeature to our renderer features list by using the little plus icon.</p>
<p><picture><source type="image/webp" srcset="DepthNormalsFeature.png-297w.webp 297w" sizes="(min-width: 30em) 50vw, 100vw"><img class="note-image" alt="Outline effect." style="width:;" loading="lazy" decoding="async" src="DepthNormalsFeature.png-297w.jpeg" width="297" height="221"></picture></p>
<p>One more important thing that you should do is check the Depth Texture box in your pipeline asset. This should be done because we will be using this generated depth texture in our outline shader so we want the rendering pipeline to generate it for us.</p>
<p><picture><source type="image/webp" srcset="GenerateDepthTexture.png-155w.webp 155w" sizes="(min-width: 30em) 50vw, 100vw"><img class="note-image" alt="Outline effect." style="width:;" loading="lazy" decoding="async" src="GenerateDepthTexture.png-155w.jpeg" width="155" height="29"></picture></p>
<p>Instead of using the _CameraDepthTexture for depth, we could also just use the _CameraDepthNormalsTexture and decode both normals and depth information from it since the texture contains both. However, I believe that the _CameraDepthTexture provides greater precision when it comes to depth values. That's why we will be getting depth from the _CameraDepthTexture, normals from the _CameraDepthNormalsTexture and color from the _CameraColorTexture.</p>
<h2 id="outline-shader" tabindex="-1"><a class="anchor-link" href="#outline-shader" target="_blank" rel="noopener noreferrer">
                  <span class="screen-reader-only">Jump to heading</span>
                  <span aria-hidden="true" class="anchor-symbol">#</span>
                </a> Outline Shader</h2>
<p>The next step is to sample this newly generated _CameraDepthNormalsTexture in our shader. We will be using the Custom Function node in shader graph to create the bulk of our outline shader. The custom function node refers to a file called Outline.hlsl with a function called Outline.</p>
<p><picture><source type="image/webp" srcset="CustomFunction.png-400w.webp 400w, CustomFunction.png-776w.webp 776w" sizes="(min-width: 30em) 50vw, 100vw"><source type="image/jpeg" srcset="CustomFunction.png-400w.jpeg 400w, CustomFunction.png-776w.jpeg 776w" sizes="(min-width: 30em) 50vw, 100vw"><img class="note-image" alt="Outline effect." style="width:;" loading="lazy" decoding="async" src="CustomFunction.png-400w.jpeg" width="776" height="520"></picture></p>
<p>The code for the Outline.hlsl file can be found below.</p>
<script src="https://gist.github.com/_kingdox_/fffe2ad4ec56ba1dbc3849bc66a1875c.js"></script>
<p>Now if you were to apply this shader to an object, you would get an undesired effect. This is because we will be using this shader as an image effect. This is useful if we want the outline to be applied to all of the objects in the scene.</p>
<h2 id="image-effect" tabindex="-1"><a class="anchor-link" href="#image-effect" target="_blank" rel="noopener noreferrer">
                  <span class="screen-reader-only">Jump to heading</span>
                  <span aria-hidden="true" class="anchor-symbol">#</span>
                </a> Image Effect</h2>
<p>To add the outline as a screen-space image effect, we will be creating another renderer feature with a script called OutlineFeature.cs.</p>
<p>The code looks like this.</p>
<script src="https://gist.github.com/_kingdox_/fe56c473544d2491b6114a3f178020a0.js"></script>
<p>We add this pass to our renderer as a renderer feature and so now we have 2 renderer features. Make sure to assign the outline material to the material slot in the OutlineFeature renderer feature.</p>
<p><picture><source type="image/webp" srcset="OutlineFeature.png-269w.webp 269w" sizes="(min-width: 30em) 50vw, 100vw"><img class="note-image" alt="Outline effect." style="width:;" loading="lazy" decoding="async" src="OutlineFeature.png-269w.jpeg" width="269" height="188"></picture></p>
<p>And that's it! You should now see an outline in your scene and be able to control the outline settings through the outline material inspector.</p>
<video width="100%" title="Cosmog parallax Pokémon card." loop="" autoplay="" playsinline="" muted="true" class="note-video">
<source src="final.mp4" type="video/mp4">
<source src="final.webm" type="video/webm">
</video>

        <!--<blockquote><p>See any issues or have any comments about this note? Please <a href="/about">let me know about it</a>.</p></blockquote>-->
        <div class="note-date">
            <time>January 2020</time>
        </div>
    </div>
    <footer class="note-footer">
    <ul class="note-tags"><li>
                <a style="--tag-bg: #e1f5f6; --tag-text: #0885ff;" href="/tags/graphics">graphics</a>
            </li><li>
                <a style="--tag-bg: #eafff3; --tag-text: #61b58e;" href="/tags/unity">unity</a>
            </li><li>
                <a style="--tag-bg: #fef9d3; --tag-text: #f4ad44;" href="/tags/gamedev">gamedev</a>
            </li></ul>

   <!-- <div>
        <a href="https://twitter.com/_kingdox_" rel="noopener" target="_blank" aria-label="Xavier Arpa Twitter.">
            <span class="icon-twitter footer-icon"></span></a>
        <a href="https://www.linkedin.com/in/alexander-ameye-067a0b70/" rel="noopener" target="_blank" aria-label="Xavier Arpa LinkedIn.">
            <span class="icon-linkedin footer-icon"></span></a>
        <a href="https://github.com/_kingdox_" rel="noopener" target="_blank" aria-label="Xavier Arpa GitHub.">
            <span class="icon-github footer-icon"></span></a>
    </div>-->
</footer>
</div>
    </body>
</html>